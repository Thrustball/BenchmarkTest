<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/scripts/cookies.js"></script>
    <script src="/libaries/jquery-3.6.0.js"></script>
    <script src="/libaries/jcanvas.min.js"></script>
    <script src="/scripts/cellauto.js"></script>
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <title>Cellular Automata</title>
</head>
<body>
    <div class="w3-container">
        <h1>Cellular Automata Visualization</h1>
    </div>

    <div class="w3-container">
        <canvas id="can" width="500" height="500"></canvas>
    </div>

    <div class="w3-container"><button class="w3-button w3-border w3-round-large" onclick="next_conway();" id="startButton">Goto Next Generation</button></div>

    <script>
        draw_empty_grid(50, 50, true);
        $("canvas").click((event) => {

            let rect = document.getElementById("can").getBoundingClientRect();

            let x_pixel = event.clientX - rect.left;
            let y_pixel = event.clientY - rect.top;

            let x_index = parseInt(x_pixel / cell_width);
            let y_index = parseInt(y_pixel / cell_height);

            let idx = y_index*number_y+x_index;
            grid[idx] = true;

            // console.log(`${x_pixel}=${x_index} ; ${y_pixel}=${y_index}`);

            $('canvas').drawRect({
                fillStyle: '#000',
                x: x_index*cell_width+cw2+1, y: (y_index)*cell_height+ch2+1,
                width: cell_width-2, height: cell_height-2
            });
        });
    </script>
</body>
</html>